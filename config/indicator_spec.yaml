# =============================================================================
# CISS Risk Scoring - Indicator Specification (Korea Market)
# Bloomberg Data Availability Verification
# =============================================================================
# 검증일: 2026-01-28
# 대상시장: 한국
# 주기: Weekly (W-FRI)
# 기간: 2005-01-01 ~ today
# =============================================================================

project:
  name: CISS_Risk_Scoring_KR
  frequency: W-FRI
  start_date: '2024-01-01'
  end_date: 'today'
  timezone: 'Asia/Seoul'
  base_currency: KRW

# =============================================================================
# SECTOR 1: Money Market (단기금융시장) - Weight: 20%
# =============================================================================
sectors:
  - name: Money_Market
    weight: 0.20
    indicators:

      - id: MM1
        name: '3M CD Rate Level'
        description: '91일 CD 금리 수준 - 단기 자금시장 긴장도'
        bb_ticker: 'KWCDC Curncy'
        bb_field: 'PX_LAST'
        availability:
          start_date: '1999-01-04'
          status: 'VERIFIED'
        transform:
          type: 'level'
          stress_direction: 'up'
        resample: {rule: 'W-FRI', method: 'last'}

      - id: MM2
        name: 'CD-KTB Spread (3M)'
        description: 'CD금리 - 국고채 3M 스프레드'
        bb_ticker: null  # 직접 계산
        bb_ticker_components:
          leg_A: 'KWCDC Curncy'
          leg_B: 'GVSK3M Index'
        bb_field: 'PX_LAST'
        availability:
          start_date: '2001-01-02'
          status: 'VERIFIED'
        transform:
          type: 'spread'
          formula: 'leg_A - leg_B'
          stress_direction: 'up'
        resample: {rule: 'W-FRI', method: 'last'}

      - id: MM3
        name: 'Short-term Rate Volatility'
        description: '단기금리 변동성 (CD금리 실현변동성)'
        bb_ticker: 'KWCDC Curncy'
        bb_field: 'PX_LAST'
        availability:
          start_date: '1999-01-04'
          status: 'VERIFIED'
          notes: 'CD금리 20일 실현변동성으로 계산'
        transform:
          type: 'realized_volatility'
          window: 20
          annualize: true
          stress_direction: 'up'
        resample: {rule: 'W-FRI', method: 'last'}

  # =============================================================================
  # SECTOR 2: Bond Market (채권시장) - Weight: 20%
  # =============================================================================
  - name: Bond_Market
    weight: 0.20
    indicators:

      - id: BD1
        name: 'Term Spread (10Y-3Y)'
        description: '장단기 금리차'
        bb_ticker: null
        bb_ticker_components:
          leg_A: 'GVSK10YR Index'
          leg_B: 'GVSK3YR Index'
        bb_field: 'PX_LAST'
        availability:
          start_date: '2000-10-02'
          status: 'VERIFIED'
        transform:
          type: 'spread'
          formula: 'leg_A - leg_B'
          stress_direction: 'down'  # 역전 = 스트레스
          invert_for_stress: true
        resample: {rule: 'W-FRI', method: 'last'}

      - id: BD2
        name: 'Credit Spread (CD-KTB 3Y)'
        description: 'CD금리 - 국고채 3Y 스프레드 (신용 스프레드 대용)'
        bb_ticker: null
        bb_ticker_components:
          leg_A: 'KWCDC Curncy'    # 91일 CD
          leg_B: 'GVSK3YR Index'   # 국고채 3년
        bb_field: 'PX_LAST'
        availability:
          start_date: '2024-01-02'
          status: 'VERIFIED'
          notes: '회사채 티커 미가용으로 CD-국고채 스프레드로 대체'
        transform:
          type: 'spread'
          formula: 'leg_A - leg_B'
          stress_direction: 'up'
        resample: {rule: 'W-FRI', method: 'last'}

      - id: BD3
        name: 'Bond Market Volatility'
        description: '채권시장 변동성 (MOVE Index)'
        bb_ticker: 'MOVE Index'
        bb_field: 'PX_LAST'
        availability:
          start_date: '1988-01-04'
          status: 'VERIFIED'
        transform:
          type: 'level'
          stress_direction: 'up'
        resample: {rule: 'W-FRI', method: 'last'}

  # =============================================================================
  # SECTOR 3: Equity Market (주식시장) - Weight: 20%
  # =============================================================================
  - name: Equity_Market
    weight: 0.20
    indicators:

      - id: EQ1
        name: 'KOSPI Weekly Return'
        description: '코스피 주간 수익률'
        bb_ticker: 'KOSPI Index'
        bb_field: 'PX_LAST'
        availability:
          start_date: '1980-01-04'
          status: 'VERIFIED'
        transform:
          type: 'return'
          horizon: 'weekly'
          stress_direction: 'down'
          invert_for_stress: true
        resample: {rule: 'W-FRI', method: 'last'}

      - id: EQ2
        name: 'VKOSPI / Realized Vol'
        description: '코스피 내재변동성 (2009년 이전 실현변동성)'
        bb_ticker: 'VKOSPI Index'
        bb_ticker_fallback: 'KOSPI Index'  # 실현vol 계산용
        bb_field: 'PX_LAST'
        availability:
          start_date: '2009-04-13'
          fallback_start: '1980-01-04'
          status: 'PARTIAL'
          notes: '2009년 이전은 KOSPI 실현변동성으로 백필'
        transform:
          type: 'level'
          stress_direction: 'up'
        resample: {rule: 'W-FRI', method: 'last'}

      - id: EQ3
        name: 'Equity Illiquidity (Amihud)'
        description: '주식시장 비유동성'
        bb_ticker: 'KOSPI Index'
        bb_fields:
          price: 'PX_LAST'
          volume: 'PX_VOLUME'
        availability:
          start_date: '1990-01-02'
          status: 'VERIFIED'
        transform:
          type: 'illiquidity'
          formula: 'abs(return) / volume'
          smoothing: 20
          stress_direction: 'up'
        resample: {rule: 'W-FRI', method: 'last'}

  # =============================================================================
  # SECTOR 4: FX Market (외환시장) - Weight: 20%
  # =============================================================================
  - name: FX_Market
    weight: 0.20
    indicators:

      - id: FX1
        name: 'USD/KRW Return'
        description: '원화 약세율'
        bb_ticker: 'USDKRW Curncy'
        bb_field: 'PX_LAST'
        availability:
          start_date: '1981-01-02'
          status: 'VERIFIED'
        transform:
          type: 'return'
          horizon: 'weekly'
          stress_direction: 'up'
        resample: {rule: 'W-FRI', method: 'last'}

      - id: FX2
        name: 'FX Implied Volatility'
        description: '원/달러 옵션 내재변동성'
        bb_ticker: 'USDKRWV1M BGN Curncy'
        bb_ticker_alternatives:
          - 'KRWUSDV1M Curncy'
          - 'USDKRW1MV Curncy'
        bb_ticker_fallback: 'USDKRW Curncy'  # 실현vol
        bb_field: 'PX_LAST'
        availability:
          start_date: '2003-01-02'
          status: 'PARTIAL'
          notes: '터미널에서 정확한 티커 확인 필요'
        transform:
          type: 'level'
          stress_direction: 'up'
        resample: {rule: 'W-FRI', method: 'last'}

      - id: FX3
        name: 'CRS Basis Spread'
        description: 'Cross-currency swap basis (달러 펀딩 스트레스)'
        bb_ticker: 'KWSWNI1 Curncy'
        bb_ticker_alternatives:
          - 'KWCRS1Y Index'
          - 'KRSWC1 Curncy'
        bb_field: 'PX_LAST'
        availability:
          start_date: '2002-01-02'
          status: 'PARTIAL'
          notes: '음수가 스트레스, 변환 시 -1 곱하기'
        transform:
          type: 'level'
          stress_direction: 'down'
          invert_for_stress: true
        resample: {rule: 'W-FRI', method: 'last'}

  # =============================================================================
  # SECTOR 5: Financial Intermediaries (금융중개) - Weight: 20%
  # =============================================================================
  - name: Financial_Intermediaries
    weight: 0.20
    indicators:

      - id: FI1
        name: 'Sovereign/Bank CDS Spread'
        description: '국가 CDS (금융시스템 스트레스 proxy)'
        bb_ticker: 'CKREA1U5 CBGN Curncy'
        bb_ticker_alternatives:
          - 'KOREA CDS USD SR 5Y D14 Corp'
          - 'CKREA5Y Curncy'
        bb_field: 'PX_LAST'
        availability:
          start_date: '2003-01-02'
          status: 'PARTIAL'
          notes: '개별 은행 CDS 미가용, 국가CDS로 대체'
        entitlement_risk: 'high'
        transform:
          type: 'level'
          stress_direction: 'up'
        resample: {rule: 'W-FRI', method: 'last'}

      - id: FI2
        name: 'Financial Sector Volatility'
        description: '금융업종 주가 변동성'
        bb_ticker: 'KOSPFIN Index'
        bb_ticker_alternatives:
          - 'KS070 Index'
          - 'KOSPBANK Index'
        bb_field: 'PX_LAST'
        availability:
          start_date: '2001-01-02'
          status: 'VERIFIED'
        transform:
          type: 'realized_volatility'
          window: 20
          annualize: true
          stress_direction: 'up'
        resample: {rule: 'W-FRI', method: 'last'}

      - id: FI3
        name: 'Financial Sector Relative Performance'
        description: '금융업종 vs KOSPI 상대수익률 (underperformance = stress)'
        bb_ticker: null
        bb_ticker_components:
          leg_A: 'KOSPFIN Index'   # 금융업종 지수
          leg_B: 'KOSPI Index'     # KOSPI
        bb_field: 'PX_LAST'
        availability:
          start_date: '2024-01-02'
          status: 'VERIFIED'
          notes: '금융업종 상대 약세 = 금융시스템 스트레스'
        transform:
          type: 'relative_return'
          formula: 'return(leg_A) - return(leg_B)'
          stress_direction: 'down'
          invert_for_stress: true
        resample: {rule: 'W-FRI', method: 'last'}

# =============================================================================
# FINAL TICKER SUMMARY (All Verified - 2024-01-01 ~ Present)
# =============================================================================
ticker_summary:
  # 모든 티커 검증 완료 (2024-01-01 기준)
  verified_tickers:
    - ticker: 'KWCDC Curncy'
      field: 'PX_LAST'
      used_by: ['MM1', 'MM2', 'MM3', 'BD2']
      rows: 507

    - ticker: 'GVSK3M Index'
      field: 'PX_LAST'
      used_by: ['MM2']
      rows: 506

    - ticker: 'GVSK3YR Index'
      field: 'PX_LAST'
      used_by: ['BD1', 'BD2']
      rows: 506

    - ticker: 'GVSK10YR Index'
      field: 'PX_LAST'
      used_by: ['BD1']
      rows: 506

    - ticker: 'MOVE Index'
      field: 'PX_LAST'
      used_by: ['BD3']
      rows: 516

    - ticker: 'KOSPI Index'
      field: 'PX_LAST'
      used_by: ['EQ1', 'EQ3', 'FI3']
      rows: 505

    - ticker: 'KOSPI Index'
      field: 'PX_VOLUME'
      used_by: ['EQ3']
      rows: 504

    - ticker: 'VKOSPI Index'
      field: 'PX_LAST'
      used_by: ['EQ2']
      rows: 505

    - ticker: 'USDKRW Curncy'
      field: 'PX_LAST'
      used_by: ['FX1']
      rows: 505

    - ticker: 'USDKRWV1M BGN Curncy'
      field: 'PX_LAST'
      used_by: ['FX2']
      rows: 543

    - ticker: 'KWSWNI1 Curncy'
      field: 'PX_LAST'
      used_by: ['FX3']
      rows: 536

    - ticker: 'CKREA1U5 CBGN Curncy'
      field: 'PX_LAST'
      used_by: ['FI1']
      rows: 539

    - ticker: 'KOSPFIN Index'
      field: 'PX_LAST'
      used_by: ['FI2', 'FI3']
      rows: 505
